<html>
<head>
<title>Link Sprites</title>
<script>
function readTextFile(file) {
  let rawFile = new XMLHttpRequest();
  let allText = "";
  rawFile.open("GET", file, false);
  rawFile.onreadystatechange = function () {
    if(rawFile.readyState === 4) {
      if(rawFile.status === 200 || rawFile.status == 0) {
        allText = rawFile.responseText;
      }
    }
  }
  rawFile.send(null);

  return allText;
}

function init() {
  let spritesManifest = readTextFile(".\\sprites.json");	// get sprites manifest
  let sprites = JSON.parse(spritesManifest);				// parse JSON
  sprites.sort(function(a,b) {								// sort by name
    return a.name.localeCompare(b.name);
  });
  for (let sprite in sprites) {								// iterate through sprites
    sprite = sprites[sprite];								// get this sprite
    let name = sprite.name;									// sprite name
    let author = sprite.author;								// sprite author
    let file = sprite.file;									// sprite url
    let sprite_object = document.createElement("div");		// main container
    let name_line = document.createElement("div");			// name container
    let name_link = document.createElement("a");			// name link
    let author_line = document.createElement("div");		// author container
    let sprite_image = document.createElement("div");		// image container

    sprite_object.className = "sprite";

    name_link.innerHTML = name;
    name_link.href = file;
    name_line.className = "name";
    name_line.appendChild(name_link);

    author_line.innerHTML = author;
    author_line.className = "author";

    sprite_image.className = "sprite-preview";
//    sprite_image.style.backgroundImage = "url(" + file + ')';

    sprite_object.appendChild(name_line);
    sprite_object.appendChild(author_line);
    sprite_object.appendChild(sprite_image);

    document.getElementById("sprites_container").appendChild(sprite_object);
  }
}

window.onload = function() {
  init();
}
</script>
<style type="text/css">
.sprite {
  border: 1px solid #ffffff;
  float:  left;
  width:  160px;
  height: 150px;
}
.name, .author {
  text-align: center;
}
.sprite-preview {
/*
  background-size:     calc(876px * 2) calc(2543px * 2);
  background-position: calc(-490px * 2) calc(-259px * 2);
*/
  width:               calc(32px * 2);
  height:              calc(48px * 2);
  margin:              auto;
  image-rendering:     pixelated;
}
</style>
</head>
<body>
  <h1>Link Sprites</h1>
  <div id="sprites_container"></div>
</body>
</html>
